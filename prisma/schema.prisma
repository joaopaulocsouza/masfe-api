// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  url      = env("DATABASE_URL")
  provider = "postgresql"
}

model User {
  id         String    @id @default(uuid())
  name       String
  email      String    @unique
  password   String
  gender     String?
  occupation String?
  address    String?
  birthday   DateTime?

  verbs             Verb[]
  accptanceCriteria AccetanceCriteria[]
  personas          Persona[]
  uxCorrelations    UxCorrelation[]

  @@map("users")
}

model Persona {
  id                 String          @id @default(uuid())
  name               String
  needs              String
  possible_solutions String
  occupation         String?
  gender             String?
  age                Int?
  user_id            String
  user               User            @relation(fields: [user_id], references: [id])
  uxCorrelations     UxCorrelation[]

  @@index([user_id], name: "user_id_persona_fk")
  @@map("personas")
}

model Verb {
  id             String          @id @default(uuid())
  verb           String          @unique
  garret         Int
  dimension      Int
  user_id        String
  user           User            @relation(fields: [user_id], references: [id])
  detailsVerbACs DetailsVerbAC[]

  @@index([user_id], name: "user_id_verb_fk")
  @@map("verb")
}

model AccetanceCriteria {
  id             String          @id @default(uuid())
  criteria       String          @unique
  dimension      Int
  user_id        String
  user           User            @relation(fields: [user_id], references: [id])
  detailsVerbACs DetailsVerbAC[]

  @@index([user_id], name: "user_id_ac_fk")
  @@map("acceptance_criteria")
}

model DetailsVerbAC {
  id             String            @id @default(uuid())
  verb_id        String
  verb           Verb              @relation(fields: [verb_id], references: [id])
  ac_id          String
  acs            AccetanceCriteria @relation(fields: [ac_id], references: [id])
  uxCorrelations UxCorrelation[]

  @@index([verb_id], name: "verb_id_details_fk")
  @@index([ac_id], name: "ac_id_details_fk")
  @@map("details_verb_ac")
}

model UxCorrelation {
  id          String        @id @default(uuid())
  name        String        @unique
  description String
  user_id     String
  user        User          @relation(fields: [user_id], references: [id])
  verb_ac_id  String
  details     DetailsVerbAC @relation(fields: [verb_ac_id], references: [id])
  persona_id  String
  personas    Persona       @relation(fields: [persona_id], references: [id])

  @@index([persona_id], name: "persona_id_ux_fk")
  @@index([verb_ac_id], name: "details_id_ux_fk")
  @@index([user_id], name: "user_id_ux_fk")
  @@map("ux_correlation")
}
